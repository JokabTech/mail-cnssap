import{a as ve}from"./chunk-PZZ47XRK.js";import"./chunk-4OPMYXIF.js";import{b as ue,c as fe,f as xe,i as Me,k as ge,r as be}from"./chunk-XO34ZB7H.js";import{b as se}from"./chunk-YXRGR7ZY.js";import{a as V}from"./chunk-FKLYTB4I.js";import{B as z,G as B,I as F,K as j,a as y,b as _,c as ae,d as oe,e as re,f as me,g as T,l as w,s as k,v as A,x as H,y as le,z as P}from"./chunk-K6XTAWVM.js";import{a as de}from"./chunk-VBGLGRB2.js";import{M as C,P as D,ma as I}from"./chunk-BQFQ236X.js";import{C as h,j as ie,k as S,v as ne}from"./chunk-PS6WXRYG.js";import{a as pe,b as ce}from"./chunk-HYQRV22J.js";import{Ab as b,Eb as s,Fb as e,Gb as t,Hb as m,Ib as X,Jb as Y,Mb as Z,Qb as v,S as K,Sa as G,Sb as p,Wa as l,ac as ee,ba as d,ec as i,f as J,ga as R,gb as u,gc as f,ha as $,ia as x,ja as M,jb as Q,mb as W,pc as E,qc as te,rc as U,zb as g}from"./chunk-JPJ72NUK.js";import"./chunk-2VMXMS7J.js";var L=class a{sanitizer=d(ne);transform(o){return this.sanitizer.bypassSecurityTrustHtml(o)}static \u0275fac=function(n){return new(n||a)};static \u0275pipe=Q({name:"safeHtml",type:a,pure:!0})};function je(a,o){if(a&1&&m(0,"div",27),a&2){let n=p();s("innerHTML",n.mail.admin_assistant_comment,G)}}function Ve(a,o){a&1&&(e(0,"p",28),i(1,"Aucun aper\xE7u disponible pour vous"),t())}function Le(a,o){if(a&1&&(m(0,"div",29),E(1,"safeHtml")),a&2){let n=p();s("innerHTML",te(1,1,n.mail.senior_assistant_comment),G)}}function Oe(a,o){a&1&&(e(0,"p",28),i(1,"Aucun aper\xE7u disponible pour vous"),t())}var O=class a{pdfService=d(ve);message=d(V);mail;render=!0;onDisplayPdf(){this.mail&&this.mail.scanned_document?this.pdfService.displayOnlinePdf(this.mail.id,"document"):this.message.openSnackBar("Aucun fichier \xE0 afficher","Fermer",4e3)}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=u({type:a,selectors:[["app-mail-detail-component1"]],inputs:{mail:"mail"},decls:107,vars:13,consts:[[1,"bg-white","shadow-2xl","rounded-2xl","overflow-hidden","border","border-gray-100","w-full","my-8"],[1,"p-6","md:p-7","bg-gray-900","text-white","flex","flex-col","md:flex-row","justify-between","items-start","md:items-center"],[1,"flex","items-center","space-x-4"],[1,"text-3xl","font-extrabold","tracking-tight"],[1,"inline-flex","items-center","px-4","py-1.5","font-bold","text-sm","rounded-full","bg-green-500","text-white"],[1,"h-2","w-2","rounded-full","mr-2","bg-white"],[1,"flex","space-x-3","mt-4","md:mt-0"],[1,"flex","items-center","px-5","py-2","text-sm","font-semibold","text-gray-700","bg-gray-100","rounded-full","hover:bg-gray-200","transition-colors"],[1,"me-2"],[1,"hidden","md:block"],[1,"flex","items-center","justify-center","px-5","py-2","text-sm","font-semibold","text-white","bg-blue-600","rounded-full","hover:bg-blue-700","transition-colors",3,"click"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8","p-6","md:p-8"],[1,"lg:col-span-2","space-y-8"],[1,"p-6","bg-gray-100","rounded-xl","border","border-gray-200"],[1,"text-xl","font-bold","mb-4","flex","items-center","space-x-2","text-gray-700"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-gray-500"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.98 5.98 0 0110 16a5.98 5.98 0 014.546-2.084A5 5 0 0010 11z","clip-rule","evenodd"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-x-12","gap-y-6"],[1,"text-sm","font-medium","text-gray-500","uppercase"],[1,"mt-1","text-base","font-semibold"],["d","M18 10c0 3.866-3.582 7-8 7s-8-3.134-8-7 3.582-7 8-7 8 3.134 8 7zM12 9a1 1 0 100-2 1 1 0 000 2zm-4 2a1 1 0 112 0 1 1 0 01-2 0zm1 4a1 1 0 00-1 1v1a1 1 0 002 0v-1a1 1 0 00-1-1z"],[1,"space-y-4"],[1,"p-4","bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"flex","justify-between","items-center","mt-1.5"],[1,"text-base","font-semibold","text-gray-700"],["mat-icon-button",""],[1,"border-gray-200"],[1,"max-h-52","overflow-y-auto","mt-2.5",3,"innerHTML"],[1,"mt-1","text-gray-600","italic","text-sm"],[1,"max-h-52","overflow-y-auto","mb-2.5",3,"innerHTML"],[1,"lg:col-span-1","space-y-6"],[1,"p-6","bg-white","rounded-xl","shadow-md","border","border-gray-200"],["d","M10 2a1 1 0 011 1v1h4a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V6a2 2 0 012-2h4V3a1 1 0 011-1z"],[1,"h-56","w-full","bg-gray-100","rounded-lg","flex","items-center","justify-center","border","border-dashed","border-gray-300"],[1,"text-sm","text-gray-500","italic"],[1,"flex","justify-between","items-center","mt-4"],[1,"text-sm","text-gray-700","font-medium"],["href","#",1,"text-sm","font-semibold","text-blue-600","hover:underline","transition-colors"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"h-32","w-full","bg-gray-100","rounded-lg","flex","items-center","justify-center","border","border-dashed","border-gray-300"]],template:function(n,r){n&1&&(e(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1",3),i(4),t(),e(5,"span",4),m(6,"span",5),i(7," Trait\xE9 "),t()(),e(8,"div",6)(9,"button",7)(10,"mat-icon",8),i(11,"edit"),t(),i(12," G\xE9rer "),e(13,"span",9),i(14," le courrier"),t()(),e(15,"button",10),v("click",function(){return r.onDisplayPdf()}),e(16,"mat-icon",8),i(17,"remove_red_eye"),t(),i(18," Aper\xE7u du document "),t()()(),e(19,"div",11)(20,"div",12)(21,"div",13)(22,"h2",14),x(),e(23,"svg",15),m(24,"path",16),t(),M(),e(25,"span"),i(26,"D\xE9tails cl\xE9s"),t()(),e(27,"dl",17)(28,"div")(29,"dt",18),i(30,"Exp\xE9diteur"),t(),e(31,"dd",19),i(32),t()(),e(33,"div")(34,"dt",18),i(35,"Destinataire"),t(),e(36,"dd",19),i(37),t()(),e(38,"div")(39,"dt",18),i(40,"Date d'enregistrement"),t(),e(41,"dd",19),i(42),E(43,"date"),t()(),e(44,"div")(45,"dt",18),i(46,"Date du courrier"),t(),e(47,"dd",19),i(48),E(49,"date"),t()()()(),e(50,"div",13)(51,"h2",14),x(),e(52,"svg",15),m(53,"path",20),t(),M(),e(54,"span"),i(55,"Historique des commentaires"),t()(),e(56,"div",21)(57,"div",22)(58,"div",23)(59,"p",24),i(60,"Assistant Administratif"),t(),e(61,"button",25)(62,"mat-icon"),i(63,"remove_red_eye"),t()()(),m(64,"hr",26),g(65,je,1,1,"div",27)(66,Ve,2,0,"p",28),t(),e(67,"div",22)(68,"div",23)(69,"p",24),i(70,"Assistant Principal"),t(),e(71,"button",25)(72,"mat-icon"),i(73,"remove_red_eye"),t()()(),m(74,"hr",26),g(75,Le,2,3,"div",29)(76,Oe,2,0,"p",28),t()()()(),e(77,"div",30)(78,"div",31)(79,"h2",14),x(),e(80,"svg",15),m(81,"path",32),t(),M(),e(82,"span"),i(83,"Document scann\xE9"),t()(),e(84,"div",33)(85,"p",34),i(86,"Aucun fichier"),t()(),e(87,"div",35)(88,"p",36),i(89,"document_alpha.pdf"),t(),e(90,"a",37),i(91," T\xE9l\xE9charger "),t()()(),e(92,"div",31)(93,"h2",14),x(),e(94,"svg",15),m(95,"path",38),t(),M(),e(96,"span"),i(97,"Preuve de traitement"),t()(),e(98,"div",39)(99,"p",34),i(100,"Aper\xE7u du traitement"),t()(),e(101,"div",35)(102,"p",36),i(103,"preuve_traitement.jpg"),t(),e(104,"a",37),i(105," T\xE9l\xE9charger "),t()()()()()(),m(106,"div")),n&2&&(l(4),f(" ",r.mail.subject," "),l(28),f(" ",r.mail.sender," "),l(5),f(" ",r.mail.director?r.mail.director.full_name:""," "),l(5),f(" ",U(43,7,r.mail.create_at,"dd MMMM yyyy")," "),l(6),f(" ",U(49,10,r.mail.mail_date,"dd MMMM yyyy")," "),l(17),b(r.mail.admin_assistant_comment?65:66),l(10),b(r.mail.senior_assistant_comment?75:76))},dependencies:[S,_,y,D,C,h,I,T,w,k,A,H,P,z,B,F,j,ie,L],encapsulation:2})};var N=class a{mail;static \u0275fac=function(n){return new(n||a)};static \u0275cmp=u({type:a,selectors:[["app-mail-detail-component2"]],inputs:{mail:"mail"},decls:2,vars:0,template:function(n,r){n&1&&(X(0,"p"),i(1,"mail-detail-component2 works!"),Y())},encapsulation:2})};function Ne(a,o){if(a&1&&m(0,"app-mail-detail-component1",8),a&2){let n=p();s("mail",n.incomingExternalMail)}}function Re(a,o){if(a&1&&m(0,"app-mail-detail-component2",8),a&2){let n=p();s("mail",n.incomingExternalMail)}}function $e(a,o){if(a&1){let n=Z();e(0,"button",11),v("click",function(){R(n);let c=p();return $(c.render=!0)}),e(1,"mat-icon"),i(2,"list"),t(),i(3,"Affichage 1 "),t(),e(4,"button",11),v("click",function(){R(n);let c=p();return $(c.render=!1)}),e(5,"mat-icon"),i(6,"remove_red_eye"),t(),e(7,"span"),i(8,"Affichage 2"),t()()}}var Se=class a{stateService=d(ce);http=d(de);message=d(V);unsubscribeMail$=new J;incomingExternalMail;roles="maa";render=!0;constructor(){this.stateService.setHeader(new pe("D\xC9TAIL DU COURRIER","D\xE9tail du courrier entrant externe","home")),this.incomingExternalMail=JSON.parse(sessionStorage.getItem("incomingExternalMail"))}ngOnInit(){this.findMail()}ngOnDestroy(){this.unsubscribeMail$.next(),this.unsubscribeMail$.complete()}findMail(){let o="";this.roles==="maa"?o="includeDirector=true&includeAdminAssistant=true":o="includeDirector=true&includeSeniorAssistant=true&includeAdminAssistant&includeAgent",this.http.url=`incoming-external-mails/${this.incomingExternalMail.id}?${o}`,this.unsubscribeMail$.next(),this.http.get().pipe(K(this.unsubscribeMail$)).subscribe({next:n=>{this.incomingExternalMail=n},error:n=>{this.message.openSnackBar(n,"Fermer",800)},complete:()=>{}})}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=u({type:a,selectors:[["app-incoming-external-mail-detail-component"]],inputs:{roles:"roles"},decls:21,vars:3,consts:[["mailMenu","matMenu"],[1,"flex","items-center","justify-between","md:h-14","md:px-4","md:bg-white","border-b","border-b-gray-300","md:border-b-0"],["mat-icon-button",""],[1,"mat-18"],[1,"px-3","py-1","text-xs","md:text-sm","text-blue-600","bg-blue-100","rounded-full","dark:bg-gray-800","dark:text-blue-400"],["mat-icon-button","","matTooltip","Nouveau courrier"],["mat-icon-button","","matTooltip","Actualiser"],["mat-icon-button","","matTooltip","Imprimmer",3,"matMenuTriggerFor"],[3,"mail"],["yPosition","below",3,"overlapTrigger"],["matMenuContent",""],["mat-menu-item","",3,"click"]],template:function(n,r){if(n&1&&(e(0,"section",1)(1,"button",2)(2,"mat-icon",3),i(3,"arrow_back_ios"),t()(),e(4,"span",4),i(5," Affichage 1 "),t(),e(6,"div")(7,"button",5)(8,"mat-icon"),i(9,"remove_red_eye"),t()(),e(10,"button",6)(11,"mat-icon"),i(12,"refresh"),t()(),e(13,"button",7)(14,"mat-icon"),i(15,"keyboard_arrow_down"),t()()()(),g(16,Ne,1,1,"app-mail-detail-component1",8)(17,Re,1,1,"app-mail-detail-component2",8),e(18,"mat-menu",9,0),W(20,$e,9,0,"ng-template",10),t()),n&2){let c=ee(19);l(13),s("matMenuTriggerFor",c),l(3),b(r.render?16:17),l(2),s("overlapTrigger",!1)}},dependencies:[ue,fe,xe,Me,ge,k,w,se,be,S,_,y,D,C,h,I,T,re,ae,oe,me,A,H,P,le,z,B,F,j,O,N],encapsulation:2})};export{Se as IncomingExternalMailDetailComponent};
