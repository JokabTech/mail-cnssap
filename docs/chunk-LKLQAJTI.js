import{b as ee,c as te,d as Ie,e as De,f as ie,i as oe,k as re,r as ne}from"./chunk-I2SFVS3Z.js";import{b as W}from"./chunk-YOSYX5R3.js";import{a as Ee}from"./chunk-RA4HR7YG.js";import{a as we}from"./chunk-Y3YQYZ4W.js";import{B as Y,G as J,I as q,K as z,a as N,b as O,c as B,e as $,f as G,g as P,l as j,s as K,v as L,x as H,y as U,z as X}from"./chunk-LN33XJJG.js";import{a as Q}from"./chunk-2KDJOZPQ.js";import{$ as he,M as V,O as fe,P as F,R as be,V as _e,W as Se,X as Te,Z as y,ba as Ce,ca as xe,da as Me,ea as ve,fa as ye,ga as ke,ma as R}from"./chunk-6K6YQ32S.js";import{D as A,c as de,e as pe,g as ue,j as ge,l as D}from"./chunk-DDJAZSWD.js";import{b as Z}from"./chunk-WRDENF74.js";import{Ab as u,C as le,Cb as x,Db as M,Eb as c,Fb as r,G as me,Gb as n,Hb as T,Mb as b,Qb as d,S as ae,Sb as s,Wa as l,ac as w,ba as _,ec as a,f as k,ga as g,gb as E,gc as S,ha as f,oc as v,pb as C,pc as se,qc as ce,xc as I,zb as p}from"./chunk-D6M5U3FV.js";var lt=(i,e)=>e.id;function mt(i,e){i&1&&(r(0,"div",1)(1,"span",14),a(2," Titre (55) "),n(),r(3,"button",15)(4,"mat-icon"),a(5," view_module "),n()()())}function st(i,e){if(i&1&&(r(0,"option",27),a(1),n()),i&2){let t=e.$implicit;c("value",t.id),l(),S(" ",t.designation," ")}}function ct(i,e){i&1&&(r(0,"div",29),a(1," Plage de dates invalide : la date de d\xE9but doit \xEAtre ant\xE9rieure \xE0 la date de fin. "),n())}function dt(i,e){if(i&1){let t=b();r(0,"form",16),d("ngSubmit",function(){g(t);let m=s();return f(m.onSubmit())}),r(1,"div",17)(2,"div",18)(3,"div")(4,"label",19),a(5,"Date de d\xE9but"),n(),T(6,"input",20),n()(),r(7,"div",21)(8,"div")(9,"label",22),a(10,"Date de fin"),n(),T(11,"input",23),n()(),r(12,"div",21)(13,"label",24),a(14,"Direction"),n(),r(15,"select",25)(16,"option",26),a(17,"Toutes les directions"),n(),x(18,st,2,2,"option",27,lt),n()(),r(20,"button",28),a(21,"Rechercher"),n()(),p(22,ct,2,0,"div",29),T(23,"hr",30),n()}if(i&2){let t=s();c("formGroup",t.form),l(18),M(t.departements),l(2),c("disabled",t.form.invalid),l(2),u(t.form.errors!=null&&t.form.errors.dateRangeInvalid?22:-1)}}function pt(i,e){i&1&&(r(0,"mat-button-toggle-group",13)(1,"mat-button-toggle",31)(2,"span"),a(3,"Affichage Grille"),n(),r(4,"mat-icon",32),a(5,"view_list"),n()(),r(6,"mat-button-toggle",33)(7,"span"),a(8,"Affichage tableau"),n(),r(9,"mat-icon",32),a(10,"view_module"),n()()())}var Ae=class i{http=_(Q);stateService=_(Z);message=_(Ee);destroySearchKeywordSub$=new k;destroyFormSub$=new k;searchChanged=new C;searchKeyword=new y("");withDate=!1;form;xSmallOrSmall=I(()=>this.stateService.XSmallOrSmall());unsubscribe$=new k;departements=[];constructor(){this.initForm()}ngOnDestroy(){this.destroySearchKeywordSub$.next(),this.destroySearchKeywordSub$.complete(),this.destroyFormSub$.next(),this.destroyFormSub$.complete()}initForm(){this.findDepartments(),this.form=new Te({startDate:new y(""),endDate:new y(""),department_id:new y("")},{validators:this.dateRangeValidator}),this.searchKeyword.valueChanges.pipe(le(500),me(),ae(this.destroySearchKeywordSub$)).subscribe(e=>this.emitSearch(e||""))}toggleDateSelector(e){this.withDate=e,this.emitSearch(this.searchKeyword.value||"")}emitSearch(e){this.searchChanged.emit({keyword:e,startDate:this.form.value.startDate,endDate:this.form.value.endDate,department_id:this.form.value.department_id})}dateRangeValidator=e=>{let t=e.get("startDate")?.value,o=e.get("endDate")?.value;return t&&o&&new Date(t)>new Date(o)?{dateRangeInvalid:!0}:null};onSubmit(){this.emitSearch(this.searchKeyword.value||"")}onToogleDateSelector(e){this.withDate!==e&&(this.form.reset(),this.emitSearch("")),this.withDate=e}findDepartments(){this.unsubscribe$.next(),this.http.url="departments",this.http.get().pipe(ae(this.unsubscribe$)).subscribe({next:e=>{this.departements=e},error:e=>{this.message.openSnackBar(e,"Fermer",800)},complete:()=>{}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-search-bar-component"]],outputs:{searchChanged:"searchChanged"},decls:23,vars:8,consts:[["searchMenu",""],[1,"mt-3","flex","justify-between","items-center"],[1,"md:px-4",3,"formGroup"],[1,"flex","flex-wrap","my-4","md:mt-6"],[1,"w-full","lg:w-4/12"],[1,"relative","w-full"],["type","text","placeholder","Rechercher un courrier par mot cl\xE9",1,"w-full","p-3","pl-5","pr-15","text-lg","border-2","border-gray-300","rounded-full","outline-none","transition","duration-300","focus:border-blue-500","focus:text-gray-700","bg-white","h-[45px]","lg:h-[49px]",3,"formControl"],[1,"absolute","right-4","top-1/2","transform","-translate-y-1/2","flex","items-center"],[1,"inline-block","h-[45px]","border-l","border-gray-300"],["mat-icon-button","",1,"text-gray-500","hover:text-gray-700","ml-2",3,"matMenuTriggerFor"],["xPosition","before","yPosition","below",3,"overlapTrigger"],["mat-menu-item","",3,"click"],[1,"w-full","lg:w-8/12","flex","justify-end","items-center","flex-wrap","mt-3","md:mt-0"],["value","add"],[1,"text-lg"],["mat-icon-button",""],[1,"md:px-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","md:flex-row","md:items-end","md:space-x-4","my-4"],[1,"w-full","md:w-3/12"],["for","startDate",1,"block","text-sm","text-gray-500","dark:text-gray-300"],["formControlName","startDate","type","date","placeholder","John Doe",1,"block","mt-2","w-full","placeholder-gray-400/70","dark:placeholder-gray-500","rounded-lg","border","border-gray-200","bg-white","px-5","py-3.5","text-gray-700","focus:border-blue-400","focus:outline-none","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","dark:border-gray-600","dark:bg-gray-900","dark:text-gray-300","dark:focus:border-blue-300"],[1,"w-full","md:w-3/12","md:px-4"],["for","username",1,"block","text-sm","text-gray-500","dark:text-gray-300"],["id","username","formControlName","endDate","type","date","placeholder","John Doe",1,"block","mt-2","w-full","placeholder-gray-400/70","dark:placeholder-gray-500","rounded-lg","border","border-gray-200","bg-white","px-5","py-3.5","text-gray-700","focus:border-blue-400","focus:outline-none","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","dark:border-gray-600","dark:bg-gray-900","dark:text-gray-300","dark:focus:border-blue-300"],["for","direction",1,"block","text-sm","text-gray-500","dark:text-gray-300"],["formControlName","department_id","id","direction",1,"block","w-full","placeholder-gray-400/70","dark:placeholder-gray-500","rounded-lg","border","border-gray-200","bg-white","px-5","py-3.5","text-gray-700","focus:border-blue-400","focus:outline-none","focus:ring","focus:ring-blue-300","focus:ring-opacity-40","dark:border-gray-600","dark:bg-gray-900","dark:text-gray-300","dark:focus:border-blue-300"],["selected","","value",""],[3,"value"],["matButton","filled","type","submit",1,"float-end",3,"disabled"],[1,"text-red-500","mb-1.5"],[1,"border-gray-300"],["matTooltip","Nouveau groupe","value","add","aria-label","Text align center"],["color","primary"],["matTooltip","Liste des proclamateurs","value","print","aria-label","Text align center"]],template:function(t,o){if(t&1){let m=b();p(0,mt,6,0,"div",1),p(1,dt,24,3,"form",2),r(2,"section",3)(3,"div",4)(4,"div",5),T(5,"input",6),r(6,"div",7),T(7,"span",8),r(8,"button",9)(9,"mat-icon"),a(10,"keyboard_arrow_down"),n()(),r(11,"mat-menu",10,0)(13,"button",11),d("click",function(){return g(m),f(o.onToogleDateSelector(!1))}),r(14,"mat-icon"),a(15),n(),a(16," Rechercher sans date "),n(),r(17,"button",11),d("click",function(){return g(m),f(o.onToogleDateSelector(!0))}),r(18,"mat-icon"),a(19),n(),a(20," Rechercher avec date "),n()()()()(),r(21,"div",12),p(22,pt,11,0,"mat-button-toggle-group",13),n()()}if(t&2){let m=w(12);u(o.xSmallOrSmall()?0:-1),l(),u(o.withDate?1:-1),l(4),c("formControl",o.searchKeyword),l(3),c("matMenuTriggerFor",m),l(3),c("overlapTrigger",!1),l(4),S(" ",o.withDate?"event_busy":"check"," "),l(4),S(" ",o.withDate?"check":"date_range"," "),l(3),u(o.xSmallOrSmall()?-1:22)}},dependencies:[D,O,N,F,fe,V,A,R,he,ye,ke,be,ve,_e,Se,Ce,xe,Me,P,$,B,G,j,K,L,H,X,U,Y,J,q,z,ee,te,ie,Ie,De,oe,re,W,ne],encapsulation:2})};var Oe=i=>({"bg-gray-200":i}),Ve=i=>({color:i}),Fe=(i,e)=>e.key;function ut(i,e){if(i&1){let t=b();r(0,"button",8),d("click",function(){g(t);let m=s();return f(m.onGoBack())}),r(1,"mat-icon"),a(2,"arrow_back_ios"),n()()}}function gt(i,e){if(i&1){let t=b();r(0,"div",10),d("click",function(){let m=g(t).$implicit,h=s(2);return f(h.onSelectTab(m))}),r(1,"button",11)(2,"mat-icon",12),a(3),n()()()}if(i&2){let t=e.$implicit,o=s(2);c("ngClass",v(4,Oe,o.selectedTab===t.key)),l(),c("matTooltip",o.getTooltip(t)),l(),c("ngStyle",v(6,Ve,o.selectedTab===t.key?"#007ac3":"")),l(),S(" ",t.icon," ")}}function ft(i,e){if(i&1&&x(0,gt,4,8,"div",9,Fe),i&2){let t=s();M(t.tabsOutgoing)}}function bt(i,e){if(i&1){let t=b();r(0,"div",10),d("click",function(){g(t);let m=s().$implicit,h=s(2);return f(h.onSelectTab(m))}),r(1,"button",11)(2,"mat-icon",12),a(3),n()()()}if(i&2){let t=s().$implicit,o=s(2);c("ngClass",v(4,Oe,o.selectedTab===t.key)),l(),c("matTooltip",o.getTooltip(t)),l(),c("ngStyle",v(6,Ve,o.selectedTab===t.key?"#007ac3":"")),l(),S(" ",t.icon," ")}}function _t(i,e){if(i&1&&p(0,bt,4,8,"div",9),i&2){let t=e.$implicit,o=s(2);u(t.roles!=null&&t.roles.includes(o.role)?0:-1)}}function St(i,e){if(i&1&&x(0,_t,1,1,null,null,Fe),i&2){let t=s();M(t.tabsIncoming)}}function Tt(i,e){if(i&1&&(r(0,"span",4),a(1),se(2,"uppercase"),n()),i&2){let t=s();l(),S(" ",ce(2,1,t.title)," ")}}function ht(i,e){if(i&1){let t=b();r(0,"button",13),d("click",function(){g(t);let m=s();return f(m.onEmit("goToForm"))}),r(1,"mat-icon"),a(2,"add"),n()()}}function Ct(i,e){if(i&1){let t=b();r(0,"button",14)(1,"mat-icon"),a(2,"keyboard_arrow_down"),n()(),r(3,"mat-menu",15,0)(5,"button",16),d("click",function(){g(t);let m=s();return f(m.onEmit("destined"))}),r(6,"mat-icon"),a(7,"check"),n(),a(8," Courriers qui me sont destin\xE9s"),n(),r(9,"button",16),d("click",function(){g(t);let m=s();return f(m.onEmit("all"))}),r(10,"mat-icon"),a(11,"list"),n(),a(12," Liste complete des courriers "),n()()}if(i&2){let t=w(4);c("matMenuTriggerFor",t),l(3),c("overlapTrigger",!1)}}var Ne=class i{stateService=_(Z);location=_(de);httpService=_(Q);selectedTab="initial";forOutgoingMail=!1;tabSelected=new C;actionButton=new C;roles=we;role=this.httpService.role;tabsIncoming=[{key:"initial",icon:"toc",tooltipMaa:"Tous les courriers",tooltipAaSa:"Courriers \xE0 annoter",tooltipDir:"Courriers \xE0 traiter",roles:["MAIL_ARCHIVES_AGENT","EXECUTIVE_SECRETARY","ADMIN_ASSISTANT","SENIOR_ASSISTANT","DIRECTOR"]},{key:"annotated",icon:"receipt",tooltip:"Courrier d\xE9j\xE0 annot\xE9s",roles:["ADMIN_ASSISTANT","SENIOR_ASSISTANT"]},{key:"all",icon:"list",tooltip:"Liste compl\xE8te de courriers",roles:["ADMIN_ASSISTANT","SENIOR_ASSISTANT","DIRECTOR"]},{key:"treated",icon:"assignment_turned_in",tooltip:"D\xE9j\xE0 trait\xE9s",roles:["ADMIN_ASSISTANT","SENIOR_ASSISTANT","DIRECTOR"]},{key:"to-process",icon:"translate",tooltip:"Courriers \xE0 traiter",roles:["MAIL_ARCHIVES_AGENT","EXECUTIVE_SECRETARY","ADMIN_ASSISTANT","SENIOR_ASSISTANT"]}];tabsOutgoing=[{key:"initial",icon:"receipt",tooltip:"Courriers en cours de transmission"},{key:"sent",icon:"list",tooltip:"Courriers d\xE9j\xE0 transmis"},{key:"all",icon:"assignment_turned_in",tooltip:"Liste complete de courriers"}];title;xSmallOrSmall=I(()=>this.stateService.XSmallOrSmall());constructor(){}ngOnInit(){if(this.forOutgoingMail)for(let e in this.tabsOutgoing)this.tabsOutgoing[e].key===this.selectedTab&&(this.title=this.getTooltip(this.tabsOutgoing[e]));else for(let e in this.tabsIncoming)this.tabsIncoming[e].key===this.selectedTab&&(this.title=this.getTooltip(this.tabsIncoming[e]))}onSelectTab(e){this.selectedTab=e.key,this.title=this.getTooltip(e),this.tabSelected.emit(e.key)}onEmit(e){this.selectedTab=e,this.actionButton.emit(e)}getTooltip(e){if(this.forOutgoingMail)return e.tooltip;if(e.key==="initial")switch(this.role){case"MAIL_ARCHIVES_AGENT":return e.tooltipMaa;case"DIRECTOR":return e.tooltipDir;default:return e.tooltipAaSa}return e.tooltip}onGoBack(){this.location.back()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-toolbar-component"]],inputs:{selectedTab:"selectedTab",forOutgoingMail:"forOutgoingMail"},outputs:{tabSelected:"tabSelected",actionButton:"actionButton"},decls:15,vars:6,consts:[["menu",""],[1,"flex","items-center","justify-between","md:h-16","md:px-4","border-b","border-b-gray-300","md:border-b-0","py-2","md:py-0",3,"ngClass"],[1,"flex","gap-2"],["mat-icon-button","",1,"me-2"],[1,"text-lg"],["mat-icon-button","","matTooltip","Nouveau courrier"],["mat-icon-button","","matTooltip","Actualiser",3,"click"],["mat-icon-button","","matTooltip","Imprimer",3,"click"],["mat-icon-button","",1,"me-2",3,"click"],[3,"ngClass"],[3,"click","ngClass"],["mat-icon-button","",3,"matTooltip"],[3,"ngStyle"],["mat-icon-button","","matTooltip","Nouveau courrier",3,"click"],["mat-icon-button","",3,"matMenuTriggerFor"],["yPosition","below",3,"overlapTrigger"],["mat-menu-item","",3,"click"]],template:function(t,o){t&1&&(r(0,"section",1)(1,"div",2),p(2,ut,3,0,"button",3),p(3,ft,2,0)(4,St,2,0),n(),p(5,Tt,3,3,"span",4),r(6,"div"),p(7,ht,3,0,"button",5),r(8,"button",6),d("click",function(){return o.onEmit("refresh")}),r(9,"mat-icon"),a(10,"refresh"),n()(),r(11,"button",7),d("click",function(){return o.onEmit("print")}),r(12,"mat-icon"),a(13,"print"),n()(),p(14,Ct,13,2),n()()),t&2&&(c("ngClass",o.xSmallOrSmall()?"":"u-bg-header-main"),l(2),u(o.xSmallOrSmall()?-1:2),l(),u(o.forOutgoingMail?3:4),l(2),u(o.xSmallOrSmall()?-1:5),l(2),u(o.role===o.roles.MAIL_ARCHIVES_AGENT||o.role===o.roles.ADMIN_ASSISTANT||o.role===o.roles.EXECUTIVE_SECRETARY?7:-1),l(7),u(o.role===o.roles.ADMIN_ASSISTANT||o.role===o.roles.SENIOR_ASSISTANT?14:-1))},dependencies:[D,pe,ue,O,N,F,V,A,R,P,$,B,G,j,K,L,H,X,U,Y,J,q,z,ee,te,ie,oe,re,W,ne,ge],encapsulation:2})};var Re=class{constructor(e,t){this.action=e;this.data=t}};export{Re as a,Ae as b,Ne as c};
