import{a as Oe}from"./chunk-OD4FTP4P.js";import{a as X,b as De,c as _e,d as Ee,f as we,g as ke}from"./chunk-7FHMHPOG.js";import{a as Ie,b as Fe,c as Le,d as Be,e as Pe,f as Ve,i as He,k as Ne,r as Ae}from"./chunk-WO3WQ2XR.js";import{b as Se}from"./chunk-OYAAD6H2.js";import{a as q}from"./chunk-NS5OZLHL.js";import{B as z,G as R,I as G,K as U,a as w,b as k,c as ue,d as ge,e as fe,f as he,g as V,l as H,n as ye,o as xe,r as Me,s as N,u as be,v as A,x as O,y as Te,z as $}from"./chunk-JQ7ZTRAQ.js";import{a as j}from"./chunk-XHZ33VBC.js";import{$ as se,M as I,O as ae,P as F,R as L,T as h,V as B,W as me,X as le,Z as b,ba as pe,ca as de,da as ce,ma as P}from"./chunk-4LHVJXPR.js";import{C as E,d as re,k as _}from"./chunk-SMWCLUEH.js";import{a as ve,b as Ce}from"./chunk-VYQ2GNAY.js";import{Ab as M,Cb as W,Db as ee,Eb as d,Fb as t,Gb as i,Hb as c,Mb as Z,Qb as u,S as y,Sb as f,Wa as l,ac as te,ba as s,ec as n,f as S,fc as ie,ga as v,gb as D,gc as g,ha as C,ia as Y,ja as J,mb as Q,oc as oe,xc as ne,zb as x}from"./chunk-JOOEKZTP.js";import"./chunk-2VMXMS7J.js";function nt(a,e){if(a&1&&(t(0,"mat-error"),n(1),i()),a&2){let o=f();l(),g(" ",o.getErrorDesignation()," ")}}function rt(a,e){if(a&1&&(t(0,"mat-error"),n(1),i()),a&2){let o=f();l(),g(" ",o.getErrorAcronym()," ")}}var T=class a{dialogRef=s(De);message=s(q);data=s(_e);http=s(j);unsubscribe$=new S;form;documentType;ngOnInit(){this.initForm()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}initForm(){this.form=new le({designation:new b(this.data.documentType?this.data.documentType.designation:"",[h.required,h.minLength(10),h.maxLength(100)]),acronym:new b(this.data.documentType?this.data.documentType.acronym:"",[h.required,h.minLength(2),h.maxLength(10)])})}getErrorDesignation(){return this.form.get("designation").hasError("required")?"Ce champ est requis":this.form.get("designation").hasError("minlength")?"La d\xE9signation doit contenir au moins 10 caract\xE8res.":this.form.get("designation").hasError("maxlength")?"La d\xE9signation ne peut pas d\xE9passer 100 caract\xE8res.":""}getErrorAcronym(){return this.form.get("acronym").hasError("required")?"Ce champ est requis":this.form.get("acronym").hasError("minlength")?"L'acronyme doit contenir au moins 2 caract\xE8res.":this.form.get("acronym").hasError("maxlength")?"L'acronyme ne peut pas d\xE9passer 10 caract\xE8res.":""}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched(),this.message.openSnackBar("Veuillez corriger les erreurs du formulaire.","Fermer",4e3);return}this.data.target==="add"?this.add():this.update()}add(){this.http.url="document-types",this.http.save(this.form.value).pipe(y(this.unsubscribe$)).subscribe({next:e=>{this.documentType=e},error:e=>{this.message.openSnackBar(e,"Fermer",4e3)},complete:()=>{this.message.openSnackBar("Type de document ajout\xE9 avec succ\xE8s","Fermer",4e3),this.dialogRef.close(this.documentType)}})}update(){this.http.url=`document-types/${this.data.documentType.id}`,this.http.update(this.form.value).pipe(y(this.unsubscribe$)).subscribe({next:e=>{this.documentType=e},error:e=>{this.message.openSnackBar(e,"Fermer",4e3)},complete:()=>{this.message.openSnackBar("Type de document modifi\xE9 avec succ\xE8s","Fermer",4e3),this.dialogRef.close(this.documentType)}})}onClose(){this.dialogRef.close()}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=D({type:a,selectors:[["app-document-type-edit-component"]],decls:24,vars:4,consts:[[1,"flex","items-center","justify-between","px-4","py-2","bg-white","dark:bg-gray-900","shadow-sm"],[1,"text-lg","font-semibold","text-gray-800","dark:text-gray-300"],["mat-icon-button","",3,"click"],[1,"-mx-3","md:-mx-0",3,"ngSubmit","formGroup"],[1,"w-full","mt-1"],[1,"w-full"],["type","text","matInput","","formControlName","designation"],["type","text","matInput","","formControlName","acronym"],[1,"mt-5"],[1,"border-gray-300"],["mat-flat-button","","cdkFocusInitial","",3,"click"]],template:function(o,r){if(o&1&&(t(0,"div",0)(1,"h2",1),n(2),i(),t(3,"button",2),u("click",function(){return r.onClose()}),t(4,"mat-icon"),n(5,"close"),i()()(),t(6,"mat-dialog-content")(7,"form",3),u("ngSubmit",function(){return r.onSubmit()}),t(8,"div",4)(9,"mat-form-field",5)(10,"mat-label"),n(11,"D\xE9signation de la direction"),i(),c(12,"input",6),x(13,nt,2,1,"mat-error"),i(),t(14,"mat-form-field",5)(15,"mat-label"),n(16,"Acronyme de la direction"),i(),c(17,"input",7),x(18,rt,2,1,"mat-error"),i()()()(),t(19,"div",8),c(20,"hr",9),i(),t(21,"mat-dialog-actions")(22,"button",10),u("click",function(){return r.onSubmit()}),n(23," Enregister "),i()()),o&2){let m,p;l(2),g(" ",r.data.title," "),l(5),d("formGroup",r.form),l(6),M((m=r.form.get("designation"))!=null&&m.hasError?13:-1),l(5),M((p=r.form.get("acronym"))!=null&&p.hasError?18:-1)}},dependencies:[we,ke,_,k,w,F,ae,I,E,P,se,L,B,me,de,ce,V,H,N,Me,ye,xe,A,be,O,$,z,R,G,U],encapsulation:2})};var at=a=>({item:a}),mt=(a,e)=>e.id;function lt(a,e){if(a&1&&(t(0,"span",3),n(1),i()),a&2){let o=f();l(),g(" Toutes les directions (",o.allUDocymentTypes.length,") ")}}function st(a,e){a&1&&(t(0,"mat-button-toggle-group",12)(1,"mat-button-toggle",33)(2,"span"),n(3,"Affichage Grille"),i(),t(4,"mat-icon",34),n(5,"view_list"),i()(),t(6,"mat-button-toggle",35)(7,"span"),n(8,"Affichage tableau"),i(),t(9,"mat-icon",34),n(10,"view_module"),i()()())}function pt(a,e){if(a&1&&(t(0,"tr")(1,"td",36)(2,"div")(3,"h4",37),n(4),i()()(),t(5,"td",36)(6,"div")(7,"h2",38),n(8),i()()(),t(9,"td",39),n(10),i(),t(11,"td",36)(12,"button",40)(13,"mat-icon"),n(14,"more_vert"),i()()()()),a&2){let o=e.$implicit,r=e.$index;f();let m=te(45);l(4),ie(r+1),l(4),g(" ",o.designation," "),l(2),g(" ",o.acronym," "),l(2),d("matMenuTriggerFor",m)("matMenuTriggerData",oe(5,at,o))}}function dt(a,e){if(a&1){let o=Z();t(0,"button",41),u("click",function(){let m=v(o).item,p=f();return C(p.onUpdateDialog(m))}),t(1,"mat-icon"),n(2,"edit"),i(),n(3,"Modifier "),i(),t(4,"button",42)(5,"mat-icon"),n(6,"delete"),i(),t(7,"span"),n(8,"Supprimer"),i()()}}var $e=class a{http=s(j);message=s(q);stateService=s(Ce);dialog=s(Ee);xSmallOrSmall=ne(()=>this.stateService.XSmallOrSmall());unsubscribe$=new S;loading=!1;allUDocymentTypes=[];filteredDocumentTypes=[];paginatedDocumentTypes=[];totalLength=0;currentPage=0;pageSizeOptions=[6,10,15,20];pageSize=this.pageSizeOptions[0];searchKeyword=new b("");constructor(){this.stateService.setHeader(new ve("GESTION DES TYPE DE DOCUMENT","Liste des tous les documents","event_seat"))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}ngOnInit(){this.onGet(),this.setupSearch()}onGet(){this.loading=!0,this.http.url="document-types",this.unsubscribe$.next(),this.http.get().pipe(y(this.unsubscribe$)).subscribe({next:e=>{this.allUDocymentTypes=e,this.filteredDocumentTypes=e},error:e=>{this.loading=!1,this.message.openSnackBar(e,"Fermer",800)},complete:()=>{this.loading=!1,this.totalLength=this.filteredDocumentTypes.length,this.updatePaginated()}})}setupSearch(){this.searchKeyword.valueChanges.pipe(y(this.unsubscribe$)).subscribe(e=>{this.applyFilter(e)})}applyFilter(e){let o=e?e.toLowerCase().trim():"";this.filteredDocumentTypes=this.allUDocymentTypes.filter(r=>r.designation.toLowerCase().includes(o)),this.totalLength=this.filteredDocumentTypes.length,this.currentPage=0,this.updatePaginated()}updatePaginated(){let e=this.currentPage*this.pageSize,o=e+this.pageSize;this.paginatedDocumentTypes=this.filteredDocumentTypes.slice(e,o)}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.updatePaginated()}onAddDialog(e){let o=new X;o.disableClose=!0,o.data={title:"Ajouter un type de document",documentType:e,target:"add"},this.dialog.open(T,o).afterClosed().subscribe(m=>{m&&(this.allUDocymentTypes.push(m),this.applyFilter(this.searchKeyword.value))})}onUpdateDialog(e){let o=new X;o.disableClose=!0,o.data={title:"Modifier un type de document",documentType:e,target:"edit"},this.dialog.open(T,o).afterClosed().subscribe(m=>{if(m){let p=this.filteredDocumentTypes.findIndex(K=>K.id===m.id);p!==-1&&(this.filteredDocumentTypes[p]=m,this.updatePaginated())}})}static \u0275fac=function(o){return new(o||a)};static \u0275cmp=D({type:a,selectors:[["app-document-type-component"]],decls:48,vars:9,consts:[["menu","matMenu"],[1,"flex","items-center","justify-between","md:h-16","md:px-4","border-b","border-b-gray-300","md:border-b-0","py-2","md:py-0",3,"ngClass"],[1,"flex","gap-2"],[1,"text-lg"],["mat-icon-button","","matTooltip","Nouveau courrier",3,"click"],["mat-icon-button","","matTooltip","Imprimer"],[1,"flex","flex-wrap","my-4","md:mt-6"],[1,"w-full","lg:w-4/12"],[1,"relative","w-full"],["type","text","placeholder","Rechercher un courrier par mot cl\xE9",1,"w-full","p-3","pl-5","pr-15","text-lg","border-2","border-gray-300","md:rounded-full","outline-none","transition","duration-300","focus:border-blue-500","focus:text-gray-700","bg-white","h-[45px]","lg:h-[49px]",3,"formControl"],[1,"absolute","right-4","top-1/2","transform","-translate-y-1/2","text-gray-500","text-lg"],[1,"w-full","lg:w-8/12","flex","justify-end","items-center","flex-wrap","mt-3","md:mt-0"],["value","add"],[1,"flex","flex-col","md:mt-6"],[1,"overflow-x-auto"],[1,"inline-block","min-w-full","align-middle"],[1,"overflow-hidden","border-y","border-gray-200","dark:border-gray-700","md:rounded-lg"],[1,"min-w-full","divide-y","divide-gray-200","dark:divide-gray-700"],[1,"bg-gray-50","dark:bg-gray-800"],["scope","col",1,"px-4","py-3.5","text-sm","font-normal","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],["scope","col",1,"py-3.5","px-4","text-sm","font-normal","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","gap-x-3","focus:outline-none"],["viewBox","0 0 10 11","fill","none","xmlns","http://www.w3.org/2000/svg",1,"h-3"],["d","M2.13347 0.0999756H2.98516L5.01902 4.79058H3.86226L3.45549 3.79907H1.63772L1.24366 4.79058H0.0996094L2.13347 0.0999756ZM2.54025 1.46012L1.96822 2.92196H3.11227L2.54025 1.46012Z","fill","currentColor","stroke","currentColor","stroke-width","0.1"],["d","M0.722656 9.60832L3.09974 6.78633H0.811638V5.87109H4.35819V6.78633L2.01925 9.60832H4.43446V10.5617H0.722656V9.60832Z","fill","currentColor","stroke","currentColor","stroke-width","0.1"],["d","M8.45558 7.25664V7.40664H8.60558H9.66065C9.72481 7.40664 9.74667 7.42274 9.75141 7.42691C9.75148 7.42808 9.75146 7.42993 9.75116 7.43262C9.75001 7.44265 9.74458 7.46304 9.72525 7.49314C9.72522 7.4932 9.72518 7.49326 9.72514 7.49332L7.86959 10.3529L7.86924 10.3534C7.83227 10.4109 7.79863 10.418 7.78568 10.418C7.77272 10.418 7.73908 10.4109 7.70211 10.3534L7.70177 10.3529L5.84621 7.49332C5.84617 7.49325 5.84612 7.49318 5.84608 7.49311C5.82677 7.46302 5.82135 7.44264 5.8202 7.43262C5.81989 7.42993 5.81987 7.42808 5.81994 7.42691C5.82469 7.42274 5.84655 7.40664 5.91071 7.40664H6.96578H7.11578V7.25664V0.633865C7.11578 0.42434 7.29014 0.249976 7.49967 0.249976H8.07169C8.28121 0.249976 8.45558 0.42434 8.45558 0.633865V7.25664Z","fill","currentColor","stroke","currentColor","stroke-width","0.3"],["scope","col",1,"px-12","py-3.5","text-sm","font-normal","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],["scope","col",1,"relative","py-3.5","px-4"],[1,"sr-only"],[1,"bg-white","divide-y","divide-gray-200","dark:divide-gray-700","dark:bg-gray-900"],["yPosition","below",3,"overlapTrigger"],["matMenuContent",""],["showFirstLastButtons","",1,"mt-10",3,"page","length","pageSize","pageSizeOptions","pageIndex"],["matTooltip","Nouveau groupe","value","add","aria-label","Text align center"],["color","primary"],["matTooltip","Liste des proclamateurs","value","print","aria-label","Text align center"],[1,"px-4","py-2.5","text-sm","whitespace-nowrap"],[1,"text-gray-700","dark:text-gray-200"],[1,"text-gray-800","dark:text-white"],[1,"px-12","py-2.5","text-sm","whitespace-nowrap"],["mat-icon-button","",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-menu-item","",3,"click"],["mat-menu-item",""]],template:function(o,r){if(o&1){let m=Z();t(0,"section",1)(1,"div",2),c(2,"app-back-component"),i(),x(3,lt,2,1,"span",3),t(4,"div")(5,"button",4),u("click",function(){return v(m),C(r.onAddDialog())}),t(6,"mat-icon"),n(7,"add"),i()(),t(8,"button",5)(9,"mat-icon"),n(10,"print"),i()()()(),t(11,"section",6)(12,"div",7)(13,"div",8),c(14,"input",9),t(15,"mat-icon",10),n(16,"search"),i()()(),t(17,"div",11),x(18,st,11,0,"mat-button-toggle-group",12),i()(),t(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"table",17)(24,"thead",18)(25,"tr")(26,"th",19),n(27," N\xB0 "),i(),t(28,"th",20)(29,"button",21)(30,"span"),n(31,"D\xE9signation"),i(),Y(),t(32,"svg",22),c(33,"path",23)(34,"path",24)(35,"path",25),i()()(),J(),t(36,"th",26),n(37," Acronyme "),i(),t(38,"th",27)(39,"span",28),n(40,"Edit"),i()()()(),t(41,"tbody",29),W(42,pt,15,7,"tr",null,mt),i()()()()()(),t(44,"mat-menu",30,0),Q(46,dt,9,0,"ng-template",31),i(),t(47,"mat-paginator",32),u("page",function(K){return v(m),C(r.onPageChange(K))}),i()}o&2&&(d("ngClass",r.xSmallOrSmall()?"":"u-bg-header-main"),l(3),M(r.xSmallOrSmall()?-1:3),l(11),d("formControl",r.searchKeyword),l(4),M(r.xSmallOrSmall()?-1:18),l(24),ee(r.paginatedDocumentTypes),l(2),d("overlapTrigger",!1),l(3),d("length",r.totalLength)("pageSize",r.pageSize)("pageSizeOptions",r.pageSizeOptions)("pageIndex",r.currentPage))},dependencies:[Fe,Ie,Le,Ve,Be,Pe,He,Ne,N,H,Se,Ae,_,re,k,w,F,I,E,P,L,B,pe,V,fe,ue,ge,he,A,O,$,Te,z,R,G,U,Oe],encapsulation:2})};export{$e as DocumentTypeComponent};
