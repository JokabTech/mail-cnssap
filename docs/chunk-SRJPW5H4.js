import{a as $}from"./chunk-LKLQAJTI.js";import{a as at,b as lt}from"./chunk-YJ6I4H5R.js";import{a as P}from"./chunk-Y3YQYZ4W.js";import{A as ot,B as O,G as R,I as G,K as N,a as b,b as v,c as Z,d as tt,e as et,f as it,g as A,l as V,s as h,v as y,x as F,y as nt,z as D}from"./chunk-LN33XJJG.js";import{a as rt}from"./chunk-2KDJOZPQ.js";import{M as Q,O as W,P as k,ma as w}from"./chunk-6K6YQ32S.js";import{D as E,k as K,l as T}from"./chunk-DDJAZSWD.js";import{Ab as C,Cb as J,Db as U,Eb as g,Fb as n,Gb as r,Hb as f,Mb as M,Qb as _,Sb as m,Ta as j,Wa as c,ac as X,ba as L,ec as l,ga as s,gb as I,gc as x,ha as u,mb as H,oc as Y,pb as S,pc as q,rc as z,zb as p}from"./chunk-D6M5U3FV.js";function wt(e,o){if(e&1){let t=M();f(0,"mat-divider"),n(1,"button",0),_("click",function(){s(t);let a=m();return u(a.onMenuItemClicked("add_comment",a.item))}),n(2,"mat-icon"),l(3,"edit"),r(),n(4,"span"),l(5,"Modifier Annotation"),r()()}}function At(e,o){if(e&1){let t=M();n(0,"button",0),_("click",function(){s(t);let a=m();return u(a.onMenuItemClicked("display_mail",a.item))}),n(1,"mat-icon"),l(2,"remove_red_eye"),r(),n(3,"span"),l(4,"Aper\xE7u du document"),r()(),n(5,"button",0),_("click",function(){s(t);let a=m();return u(a.onMenuItemClicked("download_mail",a.item))}),n(6,"mat-icon"),l(7,"get_app"),r(),n(8,"span"),l(9,"T\xE9l\xE9charger le document"),r()(),n(10,"button",0),_("click",function(){s(t);let a=m();return u(a.onMenuItemClicked("share_mail",a.item))}),n(11,"mat-icon"),l(12,"shared"),r(),n(13,"span"),l(14,"Partager le document"),r()()}}function Vt(e,o){if(e&1){let t=M();n(0,"button",0),_("click",function(){s(t);let a=m(2);return u(a.onMenuItemClicked("display_proof",a.item))}),n(1,"mat-icon"),l(2,"remove_red_eye"),r(),n(3,"span"),l(4,"Aper\xE7u de la preuve"),r()(),n(5,"button",0),_("click",function(){s(t);let a=m(2);return u(a.onMenuItemClicked("download_proof",a.item))}),n(6,"mat-icon"),l(7,"get_app"),r(),n(8,"span"),l(9,"T\xE9l\xE9charger la preuve"),r()(),n(10,"button",0),_("click",function(){s(t);let a=m(2);return u(a.onMenuItemClicked("share_proof",a.item))}),n(11,"mat-icon"),l(12,"shared"),r(),n(13,"span"),l(14,"Partager la preuve"),r()()}}function ht(e,o){if(e&1){let t=M();n(0,"button",0),_("click",function(){s(t);let a=m();return u(a.onMenuItemClicked("treatment_proof",a.item))}),n(1,"mat-icon"),l(2,"attach_file"),r(),n(3,"span"),l(4,"Joindre une preuve"),r()(),p(5,Vt,15,0),f(6,"mat-divider")}if(e&2){let t=m();c(5),C(t.item.treatment_proof?5:-1)}}function yt(e,o){if(e&1){let t=M();n(0,"button",0),_("click",function(){s(t);let a=m();return u(a.onMenuItemClicked("assign_agent",a.item))}),n(1,"mat-icon"),l(2,"person"),r(),n(3,"span"),l(4,"Assigner un agent"),r()()}}function Ft(e,o){if(e&1){let t=M();n(0,"button",0),_("click",function(){s(t);let a=m();return u(a.onMenuItemClicked("edit_mail",a.item))}),n(1,"mat-icon"),l(2,"edit"),r(),n(3,"span"),l(4,"Modifier ce courrier"),r()()}}function Dt(e,o){if(e&1){let t=M();n(0,"button",0),_("click",function(){s(t);let a=m();return u(a.onMenuItemClicked("delete_mail",a.item))}),n(1,"mat-icon"),l(2,"delete"),r(),n(3,"span"),l(4,"Mettre \xE0 la corbeille"),r()()}}var B=class e{role;item;actionSelected=new S;roles=P;isExternalMail=!1;ngOnInit(){this.isExternalMail="sender"in this.item&&typeof this.item.sender=="string"}onMenuItemClicked(o,t){this.actionSelected.emit({action:o,data:t})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=I({type:e,selectors:[["app-incoming-mail-menu-component"]],inputs:{role:"role",item:"item"},outputs:{actionSelected:"actionSelected"},decls:17,vars:6,consts:[["mat-menu-item","",3,"click"],["mat-menu-item",""]],template:function(t,i){t&1&&(n(0,"button",0),_("click",function(){return i.onMenuItemClicked("view_detail",i.item)}),n(1,"mat-icon"),l(2,"list"),r(),l(3,"Voir le d\xE9tail "),r(),p(4,wt,6,0),n(5,"button",0),_("click",function(){return i.onMenuItemClicked("receipt",i.item)}),n(6,"mat-icon"),l(7,"print"),r(),n(8,"span"),l(9,"Accus\xE9 de r\xE9ception"),r()(),f(10,"mat-divider"),p(11,At,15,0),f(12,"mat-divider"),p(13,ht,7,1),p(14,yt,5,0,"button",1),p(15,Ft,5,0,"button",1),p(16,Dt,5,0,"button",1)),t&2&&(c(4),C(i.role===i.roles.ADMIN_ASSISTANT||i.role===i.roles.SENIOR_ASSISTANT?4:-1),c(7),C(i.item.scanned_document?11:-1),c(2),C(i.role===i.roles.ADMIN_ASSISTANT||i.role===i.roles.SENIOR_ASSISTANT||i.role===i.roles.DIRECTOR?13:-1),c(),C(i.role===i.roles.DIRECTOR?14:-1),c(),C(i.role===i.roles.ADMIN_ASSISTANT||i.role===i.roles.EXECUTIVE_SECRETARY&&i.isExternalMail===!1||i.role===i.roles.MAIL_ARCHIVES_AGENT&&i.isExternalMail===!0?15:-1),c(),C(i.role===i.roles.SENIOR_ASSISTANT||i.role===i.roles.ADMIN_ASSISTANT?16:-1))},dependencies:[T,v,b,k,E,w,A,Z,V,h,y,F,D,O,ot,R,G,N],encapsulation:2})};var Ot=e=>({item:e}),Rt=(e,o)=>o.id;function Gt(e,o){e&1&&f(0,"img",9)}function Nt(e,o){if(e&1){let t=M();n(0,"button",16),_("click",function(){s(t);let a=m(2).$implicit,d=m();return u(d.onAddComment(a))}),l(1,"Annoter"),r()}}function Pt(e,o){e&1&&(n(0,"button",17)(1,"mat-icon"),l(2,"check"),r()())}function $t(e,o){if(e&1){let t=M();n(0,"button",19),_("click",function(){s(t);let a=m(3).$implicit,d=m();return u(d.onSend(a))}),l(1,"Envoyer"),r()}}function Bt(e,o){if(e&1&&p(0,Pt,3,0,"button",17)(1,$t,2,0,"button",18),e&2){let t=m(2).$implicit,i=m();C(t.status===i.status.TO_SENIOR_ASSISTANT||t.status===i.status.TO_DIRECTOR||t.status===i.status.TO_BE_PROCESSED?0:1)}}function qt(e,o){if(e&1&&p(0,Nt,2,0,"button",15)(1,Bt,2,1),e&2){let t=m(2);C(t.tab===t.tabs.INITIAL?0:1)}}function zt(e,o){if(e&1){let t=M();n(0,"button",16),_("click",function(){s(t);let a=m(2).$implicit,d=m();return u(d.onAddComment(a))}),l(1,"Annoter"),r()}}function Lt(e,o){e&1&&(n(0,"button",20)(1,"mat-icon"),l(2,"check"),r()())}function jt(e,o){if(e&1){let t=M();n(0,"button",22),_("click",function(){s(t);let a=m(3).$implicit,d=m();return u(d.onSend(a))}),l(1,"Envoyer"),r()}}function Ht(e,o){if(e&1&&p(0,Lt,3,0,"button",20)(1,jt,2,0,"button",21),e&2){let t=m(2).$implicit,i=m();C(t.status===i.status.TO_DIRECTOR||t.status===i.status.TO_BE_PROCESSED?0:1)}}function Jt(e,o){if(e&1&&p(0,zt,2,0,"button",15)(1,Ht,2,1),e&2){let t=m(2);C(t.tab===t.tabs.INITIAL?0:1)}}function Ut(e,o){if(e&1){let t=M();n(0,"button",16),_("click",function(){s(t);let a=m(2).$implicit,d=m();return u(d.onAddProof(a))}),l(1,"Joindre preuve"),r()}}function Xt(e,o){e&1&&(n(0,"button",17)(1,"mat-icon"),l(2,"check"),r()())}function Yt(e,o){if(e&1&&p(0,Xt,3,0,"button",17),e&2){let t=m(2).$implicit,i=m();C(t.status===i.status.TO_BE_PROCESSED?0:-1)}}function Kt(e,o){if(e&1&&p(0,Ut,2,0,"button",15)(1,Yt,1,1),e&2){let t=m().$implicit,i=m();C(i.tab===i.tabs.INITIAL||t.status===i.status.TO_DIRECTOR?0:1)}}function Qt(e,o){e&1&&f(0,"hr",14)}function Wt(e,o){if(e&1&&(n(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),f(4,"img",8),p(5,Gt,1,0,"img",9),r(),p(6,qt,2,1)(7,Jt,2,1)(8,Kt,2,1),r(),n(9,"button",10)(10,"mat-icon",11),l(11,"more_vert"),r()()(),n(12,"h1",12),l(13),n(14,"span"),l(15),r()(),n(16,"div",13)(17,"div")(18,"span"),l(19,"Date du courrier : "),r(),n(20,"span"),l(21),q(22,"date"),r(),l(23," \xA0 | \xA0 "),n(24,"span"),l(25,"Date d'enregistrement : "),r(),n(26,"span"),l(27),q(28,"date"),r()(),n(29,"div")(30,"span"),l(31,"Exp\xE9diteur : "),r(),n(32,"span"),l(33),r()()()(),p(34,Qt,1,0,"hr",14)),e&2){let t=o.$implicit,i=o.$index,a=o.$count,d=m(),ct=X(4);c(4),g("src",t.scanned_document?"assets/images/pdf.png":"assets/images/notFile.png",j),c(),C(t.treatment_proof?5:-1),c(),C(d.role===d.roles.ADMIN_ASSISTANT?6:d.role===d.roles.SENIOR_ASSISTANT?7:d.role===d.roles.DIRECTOR?8:-1),c(3),g("matMenuTriggerFor",ct)("matMenuTriggerData",Y(17,Ot,t)),c(4),x(" ",t.subject," \xA0 "),c(2),x("#",t.id),c(6),x(" ",z(22,11,t.mail_date,"dd/MM/yyyy")," "),c(6),x(" ",z(28,14,t.create_at,"dd/MM/yyyy")," "),c(6),x(" ",d.getSenderForIncoming(t)," "),c(),C(i!==a-1?34:-1)}}function Zt(e,o){if(e&1){let t=M();n(0,"app-incoming-mail-menu-component",23),_("actionSelected",function(a){s(t);let d=m();return u(d.onActinSelected(a))}),r()}if(e&2){let t=o.item,i=m();g("role",i.role)("item",t)}}var mt=class e{httpService=L(rt);tab="initial";mails=void 0;menuSelected=new S;roles=P;status=lt;tabs=at;role=this.httpService.role;onActinSelected(o){this.menuSelected.emit(o)}ngOnInit(){}onSend(o){this.menuSelected.emit(new $("send",o))}onAddComment(o){this.menuSelected.emit(new $("add_comment",o))}onAddProof(o){this.menuSelected.emit(new $("treatment_proof",o))}getSenderForIncoming(o){return"documentType"in o?o.sender.full_name:"sender"in o?o.sender:"Inconnu"}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=I({type:e,selectors:[["app-incoming-mail-grid-component"]],inputs:{tab:"tab",mails:"mails"},outputs:{menuSelected:"menuSelected"},decls:6,vars:1,consts:[["mailMenu","matMenu"],[1,"grid","grid-cols-1","gap-8","md:grid-cols-2","lg:grid-cols-3","my-6"],["yPosition","below",3,"overlapTrigger"],["matMenuContent",""],[1,"md:p-3","border-2","border-transparent","rounded-lg","transition-all","duration-300","hover:border-blue-500"],[1,"flex","justify-between"],[1,"flex","items-center","gap-4"],[1,"relative","w-20","h-20"],["alt","Document Statut",1,"absolute","top-0","left-0","h-20","w-20","z-10",3,"src"],["src","assets/images/pdf.png","alt","Traitement Prouv\xE9",1,"absolute","bottom-0","right-0","h-16","w-16","z-20","translate-x-3","translate-y-3"],["mat-icon-button","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"mat-18"],[1,"mt-4","text-xl","font-semibold","text-gray-800"],[1,"mt-2","text-gray-500","dark:text-gray-400"],[1,"block","sm:hidden","border","border-blue-950"],["matTooltip","Cliquer pour annoter","mat-button",""],["matTooltip","Cliquer pour annoter","mat-button","",3,"click"],["matTooltip","Cliquez pour afficher l'Assistant Principal","mat-icon-button",""],["matTooltip","Cliquer pour envoyer \xE0 l'Assistant Principal pour  validation","mat-button",""],["matTooltip","Cliquer pour envoyer \xE0 l'Assistant Principal pour  validation","mat-button","",3,"click"],["matTooltip","Cliquez pour afficher le Directeur","mat-icon-button",""],["matTooltip","Cliquer pour envoyer au Directeur pour traitement","mat-button",""],["matTooltip","Cliquer pour envoyer au Directeur pour traitement","mat-button","",3,"click"],[3,"actionSelected","role","item"]],template:function(t,i){t&1&&(n(0,"section",1),J(1,Wt,35,19,null,null,Rt),r(),n(3,"mat-menu",2,0),H(5,Zt,1,2,"ng-template",3),r()),t&2&&(c(),U(i.mails),c(2),g("overlapTrigger",!1))},dependencies:[T,v,b,k,W,Q,E,w,A,et,tt,it,V,h,y,F,D,nt,O,R,G,N,B,K],encapsulation:2})};export{mt as a};
